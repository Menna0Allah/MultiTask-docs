<svg xmlns="http://www.w3.org/2000/svg" width="1800" height="1100" viewBox="0 0 1800 1100">
  <defs>
    <linearGradient id="bg" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#0b1220"/>
      <stop offset="100%" stop-color="#152236"/>
    </linearGradient>
    <linearGradient id="panel" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#1f2a44"/>
      <stop offset="100%" stop-color="#111827"/>
    </linearGradient>
    <style>
      .title { font: 700 44px "Segoe UI", Arial, sans-serif; fill: #f8fafc; }
      .subtitle { font: 500 20px "Segoe UI", Arial, sans-serif; fill: #cbd5e1; }
      .lane { font: 600 18px "Segoe UI", Arial, sans-serif; fill: #cbd5e1; letter-spacing: 1px; }
      .node { fill: url(#panel); stroke: #8fa3bf; stroke-width: 2.2; rx: 16; ry: 16; }
      .label { font: 600 21px "Segoe UI", Arial, sans-serif; fill: #e2e8f0; }
      .small { font: 500 17px "Segoe UI", Arial, sans-serif; fill: #cbd5e1; }
      .line { stroke: #cbd5e1; stroke-width: 2.3; fill: none; marker-end: url(#arrow); }
      .dash { stroke: #94a3b8; stroke-width: 1.8; stroke-dasharray: 8 6; fill: none; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="#cbd5e1" />
    </marker>
  </defs>

  <rect width="1800" height="1100" fill="url(#bg)" />
  <text x="80" y="90" class="title">Chatbot Flow (Gemini)</text>
  <text x="80" y="130" class="subtitle">Session lifecycle, messaging, task extraction, and feedback</text>

  <text x="80" y="190" class="lane">CLIENT</text>
  <rect x="80" y="220" width="360" height="140" class="node" />
  <text x="120" y="285" class="label">User App</text>
  <text x="120" y="320" class="small">Chat UI + JWT</text>

  <text x="520" y="190" class="lane">API</text>
  <rect x="480" y="220" width="420" height="180" class="node" />
  <text x="520" y="285" class="label">Chatbot API</text>
  <text x="520" y="320" class="small">/api/chatbot/chat/</text>
  <text x="520" y="350" class="small">/api/chatbot/sessions/*</text>

  <rect x="480" y="470" width="420" height="180" class="node" />
  <text x="520" y="535" class="label">Session Service</text>
  <text x="520" y="570" class="small">Create, list, end session</text>
  <text x="520" y="600" class="small">Track message history</text>

  <text x="980" y="190" class="lane">AI</text>
  <rect x="980" y="240" width="340" height="160" class="node" />
  <text x="1020" y="305" class="label">Gemini API</text>
  <text x="1020" y="340" class="small">Prompt + response</text>

  <text x="1400" y="190" class="lane">DATA</text>
  <rect x="1360" y="340" width="360" height="200" class="node" />
  <text x="1400" y="410" class="label">PostgreSQL</text>
  <text x="1400" y="445" class="small">Sessions + messages</text>
  <text x="1400" y="475" class="small">Ratings + status</text>

  <rect x="980" y="520" width="340" height="160" class="node" />
  <text x="1020" y="585" class="label">Task Extraction</text>
  <text x="1020" y="620" class="small">/api/chatbot/sessions/:id/extract-task</text>

  <rect x="980" y="720" width="340" height="160" class="node" />
  <text x="1020" y="785" class="label">Category Suggestion</text>
  <text x="1020" y="820" class="small">/api/chatbot/suggest-category</text>

  <rect x="480" y="720" width="420" height="180" class="dash" />
  <text x="500" y="780" class="label">Feedback &amp; Analytics</text>
  <text x="500" y="815" class="small">/api/chatbot/messages/:id/rate</text>
  <text x="500" y="845" class="small">/api/chatbot/statistics</text>
  <text x="500" y="875" class="small">/api/chatbot/status</text>

  <path d="M440 290 L480 290" class="line" />
  <path d="M690 400 L690 470" class="line" />
  <path d="M900 320 L980 320" class="line" />
  <path d="M1320 340 L1360 430" class="line" />
  <path d="M900 560 L980 560" class="line" />
  <path d="M900 760 L980 760" class="line" />
  <path d="M900 520 L1360 520" class="line" />
</svg>
